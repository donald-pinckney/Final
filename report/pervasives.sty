\usepackage{listings}
\usepackage{cleveref}
\usepackage{etoolbox}
\usepackage{textcomp}
% \usepackage{caption}
% \usepackage{subcaption}
% \usepackage{ebproof}
% \usepackage{xifthen}
% \usepackage{bm}
% \usepackage{tikz}
% \usepackage{enumitem}
% \setlistdepth{9}
% \newlist{myEnumerate}{enumerate}{9}

% \usetikzlibrary{positioning}
% \usetikzlibrary{patterns}
% \usetikzlibrary{fit}
% \usetikzlibrary{arrows}


\usepackage{caption}
\usepackage{subcaption}

%\usepackage{subcaption}
\usepackage{mathtools}
%\usepackage{mathpartir}
\usepackage{xspace}
%\usepackage{harpoon}
%\usepackage{tikz}
%\usepackage{balance}
%\usepackage{outline}
\usepackage{stmaryrd}

% see https://pointpubs.wordpress.com/category/bluebook/ for why we do not italicise i.e. and e.g.
% \newcommand{\eg}{e.g., }
% \newcommand{\ie}{i.e., }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Paper Specific Stuff				                                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\namebackend}{{\sc PacSolve}\xspace}
\newcommand{\namenpm}{{\sc MinNPM}\xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Temporary editing stuff					                                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\ag}[1]{\ifisdraft{\color{red}[#1 -- Arjun]}\fi}
\newcommand{\djp}[1]{\ifisdraft{\color{brown}[#1 -- Donald]}\fi}
\newcommand{\tg}[1]{\ifisdraft{\color{blue}[#1 -- Todd]}\fi}

\newcommand{\term}[1]{\emph{#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Language listing definitions                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\lstdefinelanguage{Racket}{
  keywords={define,lambda,local,equal?,\#t,\#f,struct,match,if},
  basicstyle=\ttfamily,
  columns=fullflexible,
  comment=[l]{;},
%  keepspaces=true,
%  mathescape=false,
  escapechar=@
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Automatically use smaller fonts in figures.                                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstdefinestyle{figurestyle}{
  basicstyle=\fontsize{8}{8}\ttfamily,
  numbers=left,
  numberstyle=\fontsize{5}{5}\rmfamily,
  numbersep=0.4em,
  stepnumber=1,
  firstnumber=1,
  xleftmargin=1em}

\lstdefinestyle{normalstyle}{
  basicstyle=\small\ttfamily\fontsize{7}{7},
  numbers=none}

\newtoggle{infig}
\togglefalse{infig}
\AtBeginEnvironment{figure}{\toggletrue{infig}}
\AtEndEnvironment{figure}{\togglefalse{infig}}
\AtBeginEnvironment{figure*}{\toggletrue{infig}}
\AtEndEnvironment{figure*}{\togglefalse{infig}}
\AtBeginEnvironment{wrapfigure}{\toggletrue{infig}}
\AtEndEnvironment{wrapfigure}{\togglefalse{infig}}

\AtBeginEnvironment{lstlisting}{
  \iftoggle{infig}{
    \lstset{style=figurestyle}
  }{
    \lstset{style=normalstyle}}}

\pretocmd{\lstinputlisting}{%
  \iftoggle{infig}{%
    \lstset{style=figurestyle}%
  }{%
    \lstset{style=normalstyle}}}{}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% cleverref settings                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Display "Figure" instead of "fig".
\crefname{figure}{Figure}{Figures}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{theorem}{Theorem}{Theorems}
\crefname{definition}{Definition}{Definitions}

% Display the funny S instead of spelling out "section".
% \crefformat{section}{\S#2#1#3}
% \crefformat{subsection}{\S#2#1#3}
% \crefformat{subsubsection}{\S#2#1#3}
% Display Section instead of whatever.
\crefformat{section}{Section~#2#1#3}
\crefformat{subsection}{Section~#2#1#3}
\crefformat{subsubsection}{Section~#2#1#3}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Basic Notation                                                               %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Various other settings                                                       %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \bibliographystyle{ACM-Reference-Format}
%\citestyle{acmauthoryear}   %% For author/year citations
