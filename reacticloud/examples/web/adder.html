<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script type="text/javascript" src="./reacticloud.js"></script>

  <script type="text/javascript">
    function setupSF() {
      const addBtn = document.getElementById('addBtn')
      const answerElem = document.getElementById('answer')
      const input1Elem = document.getElementById('input1')
      const input2Elem = document.getElementById('input2')

      const int1 = reacticloud.SF.arr(x => parseInt(x))
      const int2 = reacticloud.SF.arr(x => parseInt(x))
      const adder = reacticloud.SF.arr(([x, y]) => x + y)
      const stringOut = reacticloud.SF.arr(x => x.toString())

      const final_sf = int1.parallel(int2)
        .then(adder)
        .then(stringOut)
        .subscribe(answer => {
          answerElem.innerText = answer
        })

      reacticloud.deploy("localhost", 3000, final_sf).then(runnable => {
        addBtn.onclick = () => {
          runnable([input1Elem.value, input2Elem.value])
        }
      })
    }
  </script>
</head>
<body onload="setupSF()">
  
  Number 1:
  <input type="text" id="input1" />
  <br />
  Number 2:
  <input type="text" id="input2" />
  <br />
  <button id="addBtn">Add</button>
  <br />
  Answer:
  <p id="answer"></p>
</body>
</html>